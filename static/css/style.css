/* カスタムスクロールバー */
::-webkit-scrollbar {
    width: 8px;
    height: 8px;
}
::-webkit-scrollbar-track {
    background: #f1f1f1; 
}
::-webkit-scrollbar-thumb {
    background: #888; 
    border-radius: 4px;
}
::-webkit-scrollbar-thumb:hover {
    background: #555; 
}

/* ダークモード時のスクロールバー */
.dark ::-webkit-scrollbar-track {
    background: #1e293b;
}
.dark ::-webkit-scrollbar-thumb {
    background: #475569;
}
.dark ::-webkit-scrollbar-thumb:hover {
    background: #64748b;
}

.leaflet-popup-content-wrapper {
    border-radius: 8px;
    font-family: 'Helvetica', 'Arial', sans-serif;
}

/* ダークモード時に地図の明るさを落とす */
.dark .leaflet-layer,
.dark .leaflet-control-zoom-in,
.dark .leaflet-control-zoom-out,
.dark .leaflet-control-attribution {
    filter: invert(100%) hue-rotate(180deg) brightness(95%) contrast(90%);
}
/* 雨雲レーダーなどは色反転させない */
.dark .leaflet-overlay-pane {
    filter: invert(100%) hue-rotate(180deg);
}

/* アニメーション定義: 下からふわっと浮き上がる */
@keyframes fadeInUp {
    from {
        opacity: 0;
        transform: translateY(20px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* アニメーションクラス */
.fade-in-up {
    animation: fadeInUp 0.8s cubic-bezier(0.2, 0.8, 0.2, 1) forwards;
    opacity: 0; /* 初期状態は透明 */
}

/* 遅延設定 */
.delay-1 {
    animation-delay: 0.1s;
}
.delay-2 {
    animation-delay: 0.2s;
}
.delay-3 {
    animation-delay: 0.3s;
}

/* ==========================================
   Interactive Card Animation Styles (汎用化)
   ========================================== */

/* 1. 表面レイヤー: 左へフェードアウト */
.show-detail .view-front {
    opacity: 0;
    transform: translateX(-100%);
}

/* 2. 裏面レイヤー: 右からフェードイン */
.show-detail .view-back {
    opacity: 1;
    transform: translateX(0);
}

/* PC: ホバー時にも同じアニメーションを適用 (.interactive-cardクラスを持つ要素に対して) */
@media (hover: hover) {
    .interactive-card:hover .view-front {
        opacity: 0;
        transform: translateX(-100%);
    }
    
    .interactive-card:hover .view-back {
        opacity: 1;
        transform: translateX(0);
    }
}

/* ==========================================
   AI Suggest Button Animation (New)
   ========================================== */
.btn-float-anim {
    /* ベースの影 (薄め) */
    box-shadow: 0px 8px 15px rgba(0, 0, 0, 0.1);
    transition: all 0.3s ease 0s;
}

.btn-float-anim:hover {
    /* ホバー時の影 (紫色の拡散影) */
    box-shadow: 0px 15px 20px rgba(147, 51, 234, 0.4);
    /* 上に浮き上がる */
    transform: translateY(-7px);
}

.btn-float-anim:active {
    /* クリック時に少し沈む */
    transform: translateY(-1px);
    box-shadow: 0px 5px 10px rgba(147, 51, 234, 0.2);
}

/* ==========================================
   Theme Toggle Button Animation
   ========================================== */
.theme-toggle-anim {
    position: relative;
    overflow: hidden;
    z-index: 1;
    /* 色と境界線のトランジション */
    transition: color 0.2s ease-in, border-color 0.2s ease-in, background-color 0.2s ease-in;
    
    /* 初期状態（ライトモード）: 白背景、黒文字 */
    background-color: #ffffff;
    color: #1e293b; /* Slate-800 */
    border: 1px solid #cbd5e1; /* Slate-300 */
    cursor: pointer;
}

/* 擬似要素によるアニメーション背景 (波紋用) */
.theme-toggle-anim::before,
.theme-toggle-anim::after {
    content: "";
    position: absolute;
    left: 50%;
    transform: translateX(-50%) scaleY(1) scaleX(1.25);
    top: 100%;
    width: 140%;
    height: 180%;
    background-color: rgba(0, 0, 0, 0.05);
    border-radius: 50%;
    display: block;
    transition: all 0.5s 0.1s cubic-bezier(0.55, 0, 0.1, 1);
    z-index: -1;
}

/* メインの背景色になる擬似要素 */
.theme-toggle-anim::after {
    left: 55%;
    transform: translateX(-50%) scaleY(1) scaleX(1.45);
    top: 180%;
    width: 160%;
    height: 190%;
    background-color: #1e293b; /* ダーク色 (Slate-800) */
}

/* ホバー時 または ダークモード有効時(.darkクラスがある時) */
/* これにより、クリック後も反転状態が維持されます */
.theme-toggle-anim:hover,
:is(.dark .theme-toggle-anim) {
    color: #ffffff;
    border-color: #1e293b;
    background-color: transparent; /* 背景色は擬似要素で表現するため透明に */
}

.theme-toggle-anim:hover::before,
:is(.dark .theme-toggle-anim)::before {
    top: -35%;
    background-color: #1e293b;
    transform: translateX(-50%) scaleY(1.3) scaleX(0.8);
}

.theme-toggle-anim:hover::after,
:is(.dark .theme-toggle-anim)::after {
    top: -45%;
    background-color: #1e293b;
    transform: translateX(-50%) scaleY(1.3) scaleX(0.8);
}
